<section>
    <div class="container">
        <div class="product" *ngFor="let product of products; let i = index">
            <div class="images">
                <img [src]="product.images[product.selected]">
                <div class="image-picker">
                    <img 
                    *ngFor="let img of product.images; let j = index" 
                    [src]="img" 
                    (click)="product.selected = j" 
                    [ngClass]="{ 'selected': j === product.selected }">
                </div>
            </div>
            
            <div class="body">
                <h2>{{ product.label }}</h2>
                <p>{{ product.description }}</p>
                <h5>{{ product.price }}SEK</h5>
                <button [style.backgroundColor]="themeColor" (click)="openModal(product)">Place Order</button>
            </div>
        </div>
    </div>

    <a routerLink="/contact">I have a question</a>
</section>

<div class="modal" (click)="closeModal($event)" [ngClass]="{ 'open': modalOpen }">
    <div class="modal-content" (click)="$event.stopPropagation()" *ngIf="modalData.product">
        <i class="fas fa-times" (click)="modalOpen = false"></i>
        
        <div class="modal-inner" *ngIf="modalData.product.view === 0">
            <header>
                <h3>{{ modalData.product.label }} <span>1/2</span></h3>
            </header>
            <section>
                <p>{{ modalData.product.description }}</p>
    
                <div class="images">
                    <img *ngFor="let img of modalData.product.images" [src]="img">
                </div>
                
                <div class="modal-actions">
                    <button [style.backgroundColor]="themeColor" (click)="modalData.product.view = 1">Proceed To Delivery Information <i class="fas fa-arrow-right"></i></button>
                </div>
            </section>
        </div>

        <div class="modal-inner" *ngIf="modalData.product.view === 1">
            <header>
                <h3>{{ modalData.product.label }} <span>2/2</span></h3>
            </header>
            <section>
                <form [style.--focuscolor]="themeColor">
                    <div class="form-group">
                        <label for="full_name">Full Name:</label>
                        <input type="text" name="full_name" id="full_name">
                    </div>
                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input type="email" name="email" id="email">
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone Number:</label>
                        <input type="text" name="phone" id="phone">
                    </div>
                    <div class="form-group">
                        <label for="description">Describe What You're Looking For:</label>
                        <textarea type="text" name="description" id="description"></textarea>
                    </div>
                </form>

                <div class="modal-actions">
                    <button [style.backgroundColor]="themeColor" (click)="modalData.product.view = 0"> <i class="fas fa-arrow-left"></i> Product Description</button>
                    <button [style.backgroundColor]="themeColor">Pay {{ modalData.product.price }}SEK</button>
                </div>
            </section>
        </div>
    </div>
</div>